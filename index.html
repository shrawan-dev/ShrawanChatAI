<!DOCTYPE html>
<html lang="hi" data-theme="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>ShrawanChatAI Pro</title>
<link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<style>
:root[data-theme="dark"] {
    --bg-main: #0f0f10; --sidebar-bg: #171719; --input-bg: #1e1f20;
    --text-main: #e3e3e3; --text-sub: #c4c7c5; --accent-color: #8ab4f8;
    --msg-user-bg: #2b2c2d; --border-color: #333537;
}

* { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Google Sans', sans-serif; }
body { background: var(--bg-main); color: var(--text-main); height: 100dvh; overflow: hidden; display: flex; }

/* --- ADVANCED DASHBOARD ANIMATIONS --- */
.hero-container { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 60vh; text-align: center; }

.animation-stage { height: 120px; display: flex; align-items: center; justify-content: center; margin-bottom: 10px; position: relative; width: 200px; }

.char-anim { font-size: 60px; position: absolute; opacity: 0; display: none; filter: drop-shadow(0 0 15px var(--accent-color)); }

/* Rocket Flying */
.anim-rocket { animation: rocketFly 2s ease-in-out forwards; }
@keyframes rocketFly { 0% { opacity: 0; transform: translateY(50px) rotate(-45deg); } 50% { opacity: 1; } 100% { opacity: 0; transform: translateY(-100px) rotate(-45deg); } }

/* Computer Typing */
.anim-comp { animation: compType 2s steps(5) forwards; }
@keyframes compType { 0% { opacity: 0; transform: scale(0.8); } 20% { opacity: 1; content: "ðŸ’»"; } 80% { opacity: 1; transform: scale(1.1); } 100% { opacity: 0; transform: scale(1.2); } }

/* Fireball Glow */
.anim-fire { animation: fireGlow 2s ease forwards; }
@keyframes fireGlow { 0% { opacity: 0; transform: scale(0.5); filter: blur(10px); } 50% { opacity: 1; transform: scale(1.2); filter: blur(0); } 100% { opacity: 0; transform: scale(1.5); } }

/* Robot Thinking */
.anim-robot { animation: robotMove 2s ease forwards; }
@keyframes robotMove { 0% { opacity: 0; transform: translateX(-20px); } 50% { opacity: 1; transform: translateX(0); } 100% { opacity: 0; transform: translateX(20px); } }

.gradient-title { font-size: clamp(30px, 5vw, 50px); font-weight: 700; background: linear-gradient(90deg, #ff4d4d, #f9cb28, #20e2ff, #ff4d4d); background-size: 300%; -webkit-background-clip: text; -webkit-text-fill-color: transparent; animation: flow 4s linear infinite; }
@keyframes flow { 0% { background-position: 0%; } 100% { background-position: 100%; } }

/* --- CHAT AREA --- */
.viewport { flex: 1; overflow-y: auto; padding: 20px; scroll-behavior: smooth; display: flex; flex-direction: column; align-items: center; }
#chat-flow { width: 100%; max-width: 850px; display: none; flex-direction: column; gap: 20px; padding-bottom: 150px; }
.msg-container { width: 100%; display: flex; flex-direction: column; }
.user-msg { align-self: flex-end; background: var(--msg-user-bg); padding: 15px 25px; border-radius: 25px 25px 5px 25px; max-width: 80%; }
.bot-msg { align-self: flex-start; padding: 10px; width: 100%; }

/* --- SEARCH BOX & ADAM VOICE --- */
.bottom-nav { position: fixed; bottom: 0; width: 100%; padding: 20px; background: linear-gradient(transparent, var(--bg-main) 40%); display: flex; justify-content: center; }
.input-wrapper { width: 100%; max-width: 800px; background: var(--input-bg); border: 1px solid var(--border-color); border-radius: 35px; display: flex; align-items: center; padding: 8px 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
#user-input { flex: 1; background: transparent; border: none; color: white; padding: 12px; outline: none; font-size: 16px; }

.adam-tts-btn { color: #8ab4f8; margin-right: 10px; cursor: pointer; transition: 0.3s; }
.adam-tts-btn.speaking { color: #ff4d4d; animation: pulse 1.5s infinite; }

@keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.2); } 100% { transform: scale(1); } }

.illegal-warning { border: 2px solid #ff4d4d; color: #ff4d4d; padding: 20px; border-radius: 15px; text-align: center; font-weight: bold; animation: shake 0.5s infinite; }
@keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }

.sidebar { position: fixed; left: -300px; width: 280px; height: 100%; background: var(--sidebar-bg); transition: 0.3s; z-index: 100; border-right: 1px solid var(--border-color); }
.sidebar.active { left: 0; }
</style>
</head>
<body>

<aside id="sidebar" class="sidebar">
    <div style="padding: 20px;">
        <button onclick="location.reload()" style="width:100%; padding:10px; border-radius:20px; background:var(--bg-main); color:white; border:1px solid var(--border-color); cursor:pointer;">+ New Chat</button>
        <div id="history" style="margin-top:20px;"></div>
    </div>
</aside>

<div style="flex:1; display:flex; flex-direction:column;">
    <header style="padding:15px;">
        <span class="material-icons" style="cursor:pointer;" onclick="document.getElementById('sidebar').classList.toggle('active')">menu</span>
    </header>

    <div class="viewport">
        <div id="welcome-ui" class="hero-container">
            <div class="animation-stage" id="anim-box">
                </div>
            <h1 class="gradient-title">I Am ShrawanChatAI</h1>
        </div>
        <div id="chat-flow"></div>
    </div>

    <div class="bottom-nav">
        <div class="input-wrapper">
            <span class="material-icons adam-tts-btn" id="adam-voice-btn" onclick="toggleGlobalVoice()" title="Adam Voice Control">volume_up</span>
            <input type="text" id="user-input" placeholder="Kuch bhi pucho (Adam voice active)..." onkeypress="if(event.key==='Enter') startChat()">
            <span class="material-icons" style="cursor:pointer; color:var(--text-sub); margin-right:10px;" onclick="startVoiceTyping()">mic</span>
            <span class="material-icons" style="color:var(--accent-color); cursor:pointer;" onclick="startChat()">send</span>
        </div>
    </div>
</div>

<script>
let currentApiKey = localStorage.getItem('rc_apikey') || "YOUR_OPENROUTER_KEY"; 
let isGlobalSpeaking = false;
let currentUtterance = null;
let lastBotReply = "";

// --- DASHBOARD ANIMATIONS ---
const icons = [
    { emoji: 'ðŸš€', class: 'anim-rocket' },
    { emoji: 'ðŸ’»', class: 'anim-comp' },
    { emoji: 'ðŸ”¥', class: 'anim-fire' },
    { emoji: 'ðŸ¤–', class: 'anim-robot' },
    { emoji: 'ðŸ§ ', class: 'anim-comp' },
    { emoji: 'âš¡', class: 'anim-fire' },
    { emoji: 'ðŸš€', class: 'anim-rocket' },
    { emoji: 'ðŸ“ˆ', class: 'anim-robot' },
    { emoji: 'ðŸ’¡', class: 'anim-comp' },
    { emoji: 'âœ¨', class: 'anim-fire' }
];

let iconIdx = 0;
function runIcons() {
    const box = document.getElementById('anim-box');
    box.innerHTML = '';
    const span = document.createElement('span');
    span.className = 'char-anim ' + icons[iconIdx].class;
    span.innerText = icons[iconIdx].emoji;
    span.style.display = 'block';
    box.appendChild(span);
    
    iconIdx = (iconIdx + 1) % icons.length;
    setTimeout(runIcons, 2500);
}
runIcons();

// --- CHAT & LOGIC ---
async function startChat() {
    const input = document.getElementById('user-input');
    const text = input.value.trim();
    if (!text) return;

    document.getElementById('welcome-ui').style.display = 'none';
    const flow = document.getElementById('chat-flow');
    flow.style.display = 'flex';
    
    flow.innerHTML += `<div class="msg-container user-msg"><div class="msg">${text}</div></div>`;
    input.value = '';

    const botDiv = document.createElement('div');
    botDiv.className = 'msg-container bot-msg';
    botDiv.innerHTML = `<div class="msg" id="typing">ShrawanChatAI is typing...</div>`;
    flow.appendChild(botDiv);

    // YouTube SEO & Emoji Prompt
    let systemPrompt = "You are ShrawanChatAI, a YouTube SEO Expert and Professional Assistant. Use many relevant emojis in every sentence. If the request is illegal or harmful, reply exactly: '<div class=\"illegal-warning\">ðŸš« PITAOGE DIMAK SAHI HO JAYEGA <br> YOU WILL BE BEATEN, YOUR MIND WILL BE FIXED ðŸš«</div>'";

    try {
        const res = await fetch("https://openrouter.ai/api/v1/chat/completions", {
            method: "POST",
            headers: { "Authorization": `Bearer ${currentApiKey}`, "Content-Type": "application/json" },
            body: JSON.stringify({
                "model": "google/gemini-2.0-flash-lite-preview-02-05:free",
                "messages": [{role: "system", content: systemPrompt}, {role: "user", content: text}]
            })
        });
        const data = await res.json();
        let reply = data.choices[0].message.content;
        lastBotReply = reply.replace(/<[^>]*>?/gm, ''); // Clean text for Adam
        botDiv.innerHTML = `<div class="msg">${reply.replace(/\n/g, '<br>')}</div>`;
        
        // Auto-read if Adam button is active (optional)
    } catch (e) { botDiv.innerHTML = "Error!"; }
    
    document.querySelector('.viewport').scrollTop = document.querySelector('.viewport').scrollHeight;
}

// --- ADAM VOICE ENGINE (ELEVENLABS STYLE) ---
function toggleGlobalVoice() {
    const btn = document.getElementById('adam-voice-btn');
    
    if (window.speechSynthesis.speaking && !window.speechSynthesis.paused) {
        window.speechSynthesis.pause();
        btn.innerText = "play_circle_filled";
        btn.classList.add('speaking');
        return;
    }
    
    if (window.speechSynthesis.paused) {
        window.speechSynthesis.resume();
        btn.innerText = "pause_circle_filled";
        return;
    }

    if (!lastBotReply) return;

    window.speechSynthesis.cancel();
    currentUtterance = new SpeechSynthesisUtterance(lastBotReply);
    
    // Voice Selection (Adam Style)
    let voices = window.speechSynthesis.getVoices();
    let adamVoice = voices.find(v => v.name.includes('Google UK English Male') || v.name.includes('Male'));
    if (adamVoice) currentUtterance.voice = adamVoice;
    
    currentUtterance.pitch = 0.8; // Deep voice like Adam
    currentUtterance.rate = 0.95; // Steady professional pace
    
    currentUtterance.onstart = () => {
        btn.innerText = "pause_circle_filled";
        btn.classList.add('speaking');
    };
    
    currentUtterance.onend = () => {
        btn.innerText = "volume_up";
        btn.classList.remove('speaking');
    };

    window.speechSynthesis.speak(currentUtterance);
}

function startVoiceTyping() {
    const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
    recognition.lang = 'hi-IN';
    recognition.onresult = (e) => {
        document.getElementById('user-input').value = e.results[0][0].transcript;
        startChat();
    };
    recognition.start();
}
</script>
</body>
</html>
